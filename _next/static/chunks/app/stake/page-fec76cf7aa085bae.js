(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9831],{30281:function(e,t,s){Promise.resolve().then(s.bind(s,60907))},60907:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var l=s(57437),r=s(72e3),a=s(2265),n=s(88726),i=s(42921);function c(e,t){let[s,l="0"]=e.split("."),r=s.startsWith("-");if(r&&(s=s.slice(1)),l=l.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${l}`))&&(s=`${BigInt(s)+1n}`),l="";else if(l.length>t){let[e,r,a]=[l.slice(0,t-1),l.slice(t-1,t),l.slice(t)],n=Math.round(Number(`${r}.${a}`));(l=n>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${n}`).length>t&&(l=l.slice(1),s=`${BigInt(s)+1n}`),l=l.slice(0,t)}else l=l.padEnd(t,"0");return BigInt(`${r?"-":""}${s}${l}`)}var d=s(93191),o=s(75304),u=s(61954),m=s(34954),x=s(62121),h=s(98286),b=s(94956),f=s(38128),g=s(26735),N=s(53860),j=s(25937),v=s(33628),p=s(79320),y=s(762);function w(e,t){return t&&0!==e.length?e.map(e=>{let s=(Number(e.endBlock)-Number(t))*1e3;return{votePower:Number(e.votePower)*v.t,endBlock:Number(e.endBlock),endTime:(0,y.mr)(s+Date.now())}}):[]}function k(){let e="The amount must be an integer multiple of ".concat(v.t),t=function(){var e,t;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{query:l={},watch:r}=s,n=(0,b.Z)(s),i=(0,d.NL)(),c=(0,h.x)({config:n}),g=null!==(e=s.chainId)&&void 0!==e?e:c,N=function(e,t={}){return{gcTime:0,async queryFn({queryKey:t}){let{scopeKey:s,...l}=t[1];return await function(e,t={}){let{chainId:s,...l}=t,r=e.getClient({chainId:s});return(0,u.s)(r,o.z,"getBlockNumber")(l)}(e,l)??null},queryKey:function(e={}){return["blockNumber",(0,m.O)(e)]}(t)}}(n,{...s,chainId:g});return!function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{enabled:s=!0,onBlockNumber:l,config:r,...n}=t,i=(0,b.Z)(t),c=(0,h.x)({config:i}),d=null!==(e=t.chainId)&&void 0!==e?e:c;(0,a.useEffect)(()=>{if(s&&l)return function(e,t){let s,l;let{syncConnectedChain:r=e._internal.syncConnectedChain,...a}=t,n=t=>{s&&s();let l=e.getClient({chainId:t});return s=(0,u.s)(l,f.q,"watchBlockNumber")(a)},i=n(t.chainId);return r&&!t.chainId&&(l=e.subscribe(({chainId:e})=>e,async e=>n(e))),()=>{i?.(),l?.()}}(i,{...n,chainId:d,onBlockNumber:l})},[d,i,s,l,n])}({...{config:s.config,chainId:s.chainId,..."object"==typeof r?r:{}},enabled:!!((null===(t=l.enabled)||void 0===t||t)&&("object"==typeof r?r.enabled:r)),onBlockNumber(e){i.setQueryData(N.queryKey,e)}}),(0,x.aM)({...l,...N})}(),{address:s}=(0,g.m)(),[k,C]=(0,a.useState)({}),{data:S}=(0,N.K)({address:s}),B=(0,a.useMemo)(()=>S?Number((0,i.b)(S.value,S.decimals)):0,[S]),{data:P}=(0,j.Kx)("userSummary",[s]),[I,Z]=(0,a.useState)(0);(0,a.useEffect)(()=>{P?(console.log(P),Z(Number(P.available)*v.t)):Z(0)},[P]);let[T,$]=(0,a.useState)(0);(0,a.useEffect)(()=>{P?$(Number(P.unlocked)*v.t):$(0)},[P]);let[E,M]=(0,a.useState)([]),{data:F}=(0,j.Kx)("userInQueue",[s]);(0,a.useEffect)(()=>{F?M(F):M([])},[F]);let{data:Q}=(0,j.Kx)("userOutQueue",[s]),[X,_]=(0,a.useState)([]);(0,a.useEffect)(()=>{Q?_(Q):_([])},[Q]);let[K,A]=(0,a.useState)(!1),[U,q]=(0,a.useState)(""),D="inQueue"===U?w(E,t.data):"outQueue"===U?w(X,t.data):[],[L,O]=(0,a.useState)(!1),[W,z]=(0,a.useState)(""),H=(0,a.useMemo)(()=>Math.floor(B/v.t)*v.t,[B]),R=(0,j.Xv)(),V=async()=>{if(Number(W)>H){n.ZP.error("The maximum available balance is ".concat(H)),z(String(H));return}let t=Number(W)/v.t;if(!Number.isInteger(t)||t<=0){n.ZP.error(e),z("");return}O(!0);try{let e=Number(W)/v.t,t=await R(c(W,S.decimals),e);O(!1),z(""),C({show:!0,type:"success",content:"交易已提交，请等待确认",scanHash:t})}catch(e){console.log(e),n.ZP.error(e.details),O(!1)}},[G,J]=(0,a.useState)(!1),[Y,ee]=(0,a.useState)(""),et=(0,j.aw)(),es=async()=>{if(Number(Y)>I){n.ZP.error("The maximum available amount is ".concat(I)),ee(String(I));return}let t=Number(Y)/v.t;if(!Number.isInteger(t)||t<=0){n.ZP.error(e),ee("");return}J(!0);try{let e=Number(Y)/v.t,t=await et(c(Y,S.decimals),e);J(!1),ee(""),C({show:!0,type:"success",content:"交易已提交，请等待确认",scanHash:t})}catch(e){console.log(e),n.ZP.error(e.details),J(!1)}},[el,er]=(0,a.useState)(!1),[ea,en]=(0,a.useState)(""),ei=(0,j.A4)(),ec=async()=>{if(Number(ea)>T){n.ZP.error("The maximum available amount is ".concat(T)),ee(String(T));return}let t=Number(ea)/v.t;if(!Number.isInteger(t)||t<=0){n.ZP.error(e),en("");return}er(!0);try{let e=Number(ea)/v.t,t=await ei(c(ea,S.decimals),e);er(!1),C({show:!0,type:"success",content:"交易已提交，请等待确认",scanHash:t})}catch(e){console.log(e),n.ZP.error(e.details),er(!1)}},ed=e=>{1===e&&z(String(H)),2===e&&ee(String(I)),3===e&&en(String(T))},eo=e=>{A(!0),q(e)};return(0,a.useEffect)(()=>{K?document.body.classList.add("lock"):document.body.classList.remove("lock")},[K]),(0,l.jsxs)("div",{className:"pb-5",children:[(0,l.jsx)(r.Z,{}),(0,l.jsx)("h2",{className:"slogan",children:"ABC Pool V2"}),(0,l.jsxs)("div",{className:"mx-auto px-5 grid gap-y-5 md:max-w-5xl md:grid-cols-2 md:gap-x-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-sky-400 text-2xl",children:"Stake CFX"}),(0,l.jsxs)("div",{className:"layout",children:[(0,l.jsxs)("div",{className:"layout-row",children:[(0,l.jsx)("div",{children:"Balance"}),(0,l.jsxs)("div",{className:"text-newBlue",children:[(0,y.qz)(B,5)," CFX"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"layout-row",children:[(0,l.jsx)("div",{children:"Amount"}),(0,l.jsx)("input",{value:W,type:"number",min:v.t,step:v.t,placeholder:"Please enter",className:"w-full mx-4 text-right text-sm text-newBlue bg-transparent outline-none",onChange:e=>z(e.target.value)}),(0,l.jsx)("button",{className:"text-newBlue",onClick:()=>ed(1),children:"Max"})]}),(0,l.jsx)("div",{className:"text-xs text-red-500 text-right mt-1",children:e})]})]}),(0,l.jsxs)("button",{disabled:L,className:"w-full bg-newBlue text-white px-2 h-9 mt-5 rounded-full flex items-center justify-center disabled:cursor-not-allowed disabled:opacity-65",onClick:V,children:[L?(0,l.jsx)("i",{className:"ri-loader-2-fill animate-spin mr-1"}):"","Stake"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center text-yellow-600",children:[(0,l.jsx)("h2",{className:"text-2xl",children:"Unstakeable CFX"}),(0,l.jsx)("button",{className:"border border-yellow-700 px-2 rounded",onClick:()=>eo("inQueue"),children:"Details"})]}),(0,l.jsxs)("div",{className:"layout",children:[(0,l.jsxs)("div",{className:"layout-row",children:[(0,l.jsx)("div",{children:"Unstakeable"}),(0,l.jsxs)("div",{className:"text-newBlue",children:[I," CFX"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"layout-row",children:[(0,l.jsx)("div",{children:"Amount"}),(0,l.jsx)("input",{value:Y,type:"number",min:v.t,step:v.t,placeholder:"Please enter",className:"w-full mx-4 text-right text-sm text-yellow-600 bg-transparent outline-none",onChange:e=>ee(e.target.value)}),(0,l.jsx)("button",{className:"text-newBlue",onClick:()=>ed(2),children:"Max"})]}),(0,l.jsx)("div",{className:"text-xs text-red-500 text-right mt-1",children:e})]})]}),(0,l.jsxs)("button",{disabled:G,className:"w-full bg-yellow-600 text-white px-2 h-10 mt-5 rounded-full flex items-center justify-center disabled:cursor-not-allowed disabled:opacity-65",onClick:es,children:[G?(0,l.jsx)("i",{className:"ri-loader-2-fill animate-spin mr-1"}):"","Unstake"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center text-green-600",children:[(0,l.jsx)("h2",{className:"text-2xl",children:"Withdraw CFX"}),(0,l.jsx)("button",{className:"border border-green-700 px-2 rounded",onClick:()=>eo("outQueue"),children:"Details"})]}),(0,l.jsxs)("div",{className:"layout",children:[(0,l.jsxs)("div",{className:"layout-row",children:[(0,l.jsx)("div",{children:"Withdrawable"}),(0,l.jsxs)("div",{className:"text-newBlue",children:[T," CFX"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"layout-row",children:[(0,l.jsx)("div",{children:"Amount"}),(0,l.jsx)("input",{value:ea,type:"number",min:v.t,step:v.t,placeholder:"Please enter",className:"w-full mx-4 text-right text-sm text-green-600 bg-transparent outline-none",onChange:e=>en(e.target.value)}),(0,l.jsx)("button",{className:"text-newBlue",onClick:()=>ed(3),children:"Max"})]}),(0,l.jsx)("div",{className:"text-xs text-red-500 text-right mt-1",children:e})]})]}),(0,l.jsxs)("button",{disabled:el,className:"w-full bg-green-600 text-white px-2 h-10 mt-5 rounded-full flex items-center justify-center disabled:cursor-not-allowed disabled:opacity-65",onClick:ec,children:[el?(0,l.jsx)("i",{className:"ri-loader-2-fill animate-spin mr-1"}):"","Withdraw"]})]})]}),(0,l.jsxs)("div",{className:"mx-auto mt-6 mb-10 px-5 md:max-w-5xl",children:[(0,l.jsx)("h2",{className:"text-stone-200 text-xl",children:"Stake Rules"}),(0,l.jsxs)("div",{className:"text-slate-400 leading-6 mt-2",children:[(0,l.jsx)("p",{children:"1. The lock period of Stake/Unstake is 15+2 day(May need another 2~3 hours)."}),(0,l.jsx)("p",{children:"2. The reward will updated every hour."}),(0,l.jsx)("p",{children:"3. The Stake/Unstake CFX amount must be multiple of 1000."}),(0,l.jsx)("p",{children:"4. Performance fee is 8% of the PoS reward."}),(0,l.jsx)("p",{children:"5. The reward can be claimed any time."})]})]}),(0,l.jsx)(p.Z,{setModal:e=>C(e),modalConfig:k}),K?(0,l.jsx)("div",{className:"fixed top-0 bottom-0 left-0 right-0 z-10 bg-[rgba(0,0,0,0.8)] flex justify-center items-center",children:(0,l.jsxs)("div",{className:"bg-gradient-to-tl from-green-900 to-yellow-300 w-full mx-3 px-3 py-8 md:p-8 rounded-xl relative md:w-4/5 max-w-2xl",children:[(0,l.jsx)("button",{className:"absolute top-2 right-2",onClick:()=>A(!1),children:(0,l.jsx)("i",{className:"ri-close-line text-2xl text-white"})}),(0,l.jsxs)("div",{className:"text-xl font-bold text-center md:text-left",children:["inQueue"===U?"Locking":"outQueue"===U?"Unlocking":""," votes"]}),(0,l.jsxs)("div",{className:"mt-5 text-white border-b border-gray-200/60 text-sm md:text-base",children:[(0,l.jsxs)("div",{className:"grid grid-cols-[130px_1fr] md:grid-cols-2 border-t border-l border-gray-200/60",children:[(0,l.jsx)("div",{className:"px-4 py-2 border-r border-gray-200/60",children:"Amount (CFX)"}),(0,l.jsx)("div",{className:"px-4 py-2 border-r border-gray-200/60",children:"EndTime"})]}),(0,l.jsxs)("div",{className:"max-h-96 md:max-h-[600px] overflow-y-auto thin-scrollbar",children:[D.map(e=>(0,l.jsxs)("div",{className:"grid grid-cols-[130px_1fr] md:grid-cols-2 border-t border-l border-gray-200/60",children:[(0,l.jsx)("div",{className:"px-4 py-2 border-r border-gray-200/60 h-full",children:e.votePower}),(0,l.jsxs)("div",{className:"px-4 py-2 border-r border-gray-200/60",children:[e.endTime," ",(0,l.jsx)("br",{})," ",e.endBlock]})]},e.endBlock)),0===D.length?(0,l.jsx)("div",{className:"text-center py-3 border border-b-0 border-gray-200/60",children:"No data"}):null]})]})]})}):null]})}}},function(e){e.O(0,[9472,6440,554,289,2971,7023,1744],function(){return e(e.s=30281)}),_N_E=e.O()}]);